(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{210:function(t,s,a){"use strict";a.r(s);var e=a(6),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"husky-lint-staged-prettier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#husky-lint-staged-prettier"}},[t._v("#")]),t._v(" husky + lint-staged + prettier")]),t._v(" "),a("blockquote",[a("p",[t._v("可以自定义 git 钩子方法，来实现拦截相应的功能")])]),t._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("ol",[a("li",[a("p",[a("code",[t._v("NODE")]),t._v("要求："),a("code",[t._v(">10.x")])])]),t._v(" "),a("li",[a("p",[t._v("安装 NPM 包")])])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -D husky lint-staged prettier\n")])])]),a("blockquote",[a("p",[t._v("当前文章安装完成后的版本为")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"husky"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^6.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint-staged"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^11.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"prettier"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.3.1"')]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("初始化")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# YARN 1")]),t._v("\nnpx husky-init "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("使用")])]),t._v(" "),a("p",[t._v("在当前 GIT 目录下会自动生成 "),a("code",[t._v(".husky")]),t._v("文件夹，并在"),a("code",[t._v("pre-commit")]),t._v("文件内追加这几行：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("node index.js\n")])])]),a("p",[t._v("添加 index.js 文件，然后执行"),a("code",[t._v('git add . && git commit -m "test"')]),t._v("，就可以执行了上面这行脚本，接下来我们添加 "),a("code",[t._v("lint-staged")])]),t._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[t._v("添加 "),a("code",[t._v("lint-staged")])])]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("lint-staged")]),t._v("是一个可以只针对添加到暂存区的文件进行处理的工具")])]),t._v(" "),a("p",[t._v("修改 "),a("code",[t._v("pre-commit")]),t._v(" 文件：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\nnpx --no-install lint-staged\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" lint-staged\n")])])]),a("p",[t._v("然后"),a("code",[t._v("package.json")]),t._v("中添加执行脚本")]),t._v(" "),a("blockquote",[a("p",[t._v("您也可以在单独的"),a("code",[t._v("lintstagedrc")]),t._v("文件中添加，这里不赘述，可以参考官方文档")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint-staged"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"*.{js,ts}"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prettier --write"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("接下来我们添加 Prettier")]),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[t._v("添加 Prettier")])]),t._v(" "),a("p",[t._v("项目根目录新建 "),a("code",[t._v(".prettierrc")]),t._v(" 文件，写入以下内容")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"semi"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"singleQuote"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("然后我们再提交变更，可以看到样式不规范的代码已经自动格式化了，且其他文件不受影响。")]),t._v(" "),a("h2",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[t._v("#")]),t._v(" Reference")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://typicode.github.io/husky/",target:"_blank",rel:"noopener noreferrer"}},[t._v("husky docs"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/okonet/lint-staged",target:"_blank",rel:"noopener noreferrer"}},[t._v("lint staged docs"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://prettier.io/docs/en/configuration.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("prettier docs"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-next/blob/master/package.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue next package.json"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);